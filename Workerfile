FROM python:3.6.7-stretch
MAINTAINER "Martin Mariano <contato@martinmariano.com>"

ADD . /code
WORKDIR /code

RUN apt-get update && apt-get install chromedriver --yes -f

RUN pip install pipenv
RUN pipenv install -e .[psql,monitoring] --skip-lock
RUN chmod +x docker-worker-script.sh

ENTRYPOINT ["sh", "-c"]
CMD ["./docker-worker-script.sh"]
